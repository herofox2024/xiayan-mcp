import{_ as I,b as r,c as U,h as u,a as l,e as t,r as d,t as w,g as _,E as y,y as k,o as F}from"./index-BZ-MVW6h.js";const E={class:"theme-add-container"},M={class:"css-preview"},A={class:"template-preview"},B={__name:"ThemeAdd",setup(H){const v=k(),n=r(),p=r(!1),x=r(!1),c=r("edit"),b=r("edit"),a=r({id:"",name:"",description:"",css_styles:"",template:""}),h={id:[{required:!0,message:"请输入主题ID",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:"主题ID只能包含字母、数字和下划线",trigger:"blur"},{min:1,max:50,message:"主题ID长度在 1 到 50 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入主题名称",trigger:"blur"},{min:1,max:50,message:"主题名称长度在 1 到 50 个字符",trigger:"blur"}],description:[{max:200,message:"主题描述长度不能超过 200 个字符",trigger:"blur"}]},T=async()=>{n.value&&await n.value.validate(async g=>{if(g){p.value=!0;try{await new Promise(e=>setTimeout(e,1e3)),y.success("主题添加成功！"),v.push("/theme/list")}catch(e){y.error("主题添加失败："+e.message)}finally{p.value=!1}}else return console.log("表单验证失败"),!1})},C=()=>{n.value&&n.value.resetFields()},S=()=>{v.push("/theme/list")};return(g,e)=>{const m=d("el-input"),o=d("el-form-item"),i=d("el-tab-pane"),V=d("el-tabs"),f=d("el-button"),D=d("el-form");return F(),U("div",E,[e[11]||(e[11]=u("h2",null,"添加主题",-1)),l(D,{model:a.value,rules:h,ref_key:"themeFormRef",ref:n,"label-width":"80px",class:"theme-form"},{default:t(()=>[l(o,{label:"主题ID",prop:"id"},{default:t(()=>[l(m,{modelValue:a.value.id,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.id=s),placeholder:"请输入主题ID（唯一标识符，只能包含字母、数字、下划线）",maxlength:"50","show-word-limit":"",disabled:x.value},null,8,["modelValue","disabled"]),e[7]||(e[7]=u("div",{class:"form-help-text"}," 主题ID用于内部标识，建议使用英文小写、数字和下划线组合，如：my_theme ",-1))]),_:1}),l(o,{label:"主题名称",prop:"name"},{default:t(()=>[l(m,{modelValue:a.value.name,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.name=s),placeholder:"请输入主题名称",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(o,{label:"主题描述",prop:"description"},{default:t(()=>[l(m,{modelValue:a.value.description,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.description=s),placeholder:"请输入主题描述",type:"textarea",rows:3,maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(o,{label:"CSS样式"},{default:t(()=>[l(V,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=s=>c.value=s),class:"css-tabs"},{default:t(()=>[l(i,{label:"编辑",name:"edit"},{default:t(()=>[l(m,{modelValue:a.value.css_styles,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.css_styles=s),placeholder:"请输入主题CSS样式",type:"textarea",rows:10,class:"code-editor"},null,8,["modelValue"])]),_:1}),l(i,{label:"预览",name:"preview"},{default:t(()=>[u("div",M,[u("pre",null,w(a.value.css_styles||"无CSS样式"),1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(o,{label:"HTML模板"},{default:t(()=>[l(V,{modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=s=>b.value=s),class:"template-tabs"},{default:t(()=>[l(i,{label:"编辑",name:"edit"},{default:t(()=>[l(m,{modelValue:a.value.template,"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.template=s),placeholder:"请输入主题HTML模板",type:"textarea",rows:15,class:"code-editor"},null,8,["modelValue"])]),_:1}),l(i,{label:"预览",name:"preview"},{default:t(()=>[u("div",A,[u("pre",null,w(a.value.template||"无HTML模板"),1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(o,null,{default:t(()=>[l(f,{type:"primary",onClick:T,loading:p.value},{default:t(()=>[...e[8]||(e[8]=[_(" 保存主题 ",-1)])]),_:1},8,["loading"]),l(f,{onClick:C},{default:t(()=>[...e[9]||(e[9]=[_("重置",-1)])]),_:1}),l(f,{onClick:S},{default:t(()=>[...e[10]||(e[10]=[_("取消",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])}}},N=I(B,[["__scopeId","data-v-4065a277"]]);export{N as default};
